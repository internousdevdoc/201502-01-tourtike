実装フェーズ構想

大分シンプルにしました

-----------------------------------------
■画面遷移の流れ
index.jsp（アクション実行のため飛ばすだけ）
↓
GoodsList.jsp　商品一覧画面
↓
CartList.jsp　カート画面
↓
Login.jsp　ログイン画面　※ログインしていない場合
↓
CreateAccount.jsp　新規登録画面　※ログイン時にアカウントがない場合
Complete.jsp　登録完了画面　※アカウントを新規作成した場合
↓
PayOff.jsp　購入確定画面
↓
ThankYou.jsp 購入完了画面

ログインしている場合はカート→購入確定画面へ遷移となる

■各画面構想詳細
-----------------------------------------
□商品一覧画面　担当：佐藤
index.jsp
アクション実行用の空ページ
GoodsList.jsp,GetGoodsListAction,GetGoodsListDAO,DTO
商品一覧表示
CartAddAction,CartAddDAO,CartAddDTO,CartAddAction-validation
選択商品をカートに保存
GoToCartAction
次のページへ遷移
-----------------------------------------
□カート画面　担当：岩井
CartList.jsp
カート一覧表示ページ
DeleteCartAction
カート一括削除
GoToLoginAction,AddCartTableDAO,DTO
テンポラリーテーブル(cart)にカート情報を保存
次のページへ遷移
-----------------------------------------
□ログイン画面　担当：
Login.jsp
ログイン画面
LoginAction,LoginDAO,DTO,LoginAction-validation
入力されたID,PASSをDBに照合してアカウントが正しければ遷移、正しくなければ適切なエラーメッセージの表示
sessionMAP作成→user_name、user_id、user_passを作成　ログイン情報セッションは作成から15分で削除
GoToCreateAction
新規登録画面への遷移アクション
-----------------------------------------
□新規登録画面　担当：半田
CreateAccount.jsp
新規会員登録画面
CreateAccountAction,CreateAccountDAO,DTO,CreateAccountAction-validation
DB設計に基づいた値をDBへインサートする
既にアカウントが作成されている場合はエラーを表示する
制限文字を決定し、適切なエラーメッセージを表示する
-----------------------------------------
□登録完了画面　担当：松本
Complete.jsp
登録完了画面
GoToPayoffAction
購入確定画面へ遷移
-----------------------------------------
□購入確認画面　担当：林
PayOff.jsp
購入確認画面
GetCartDAO,DTO
cartテーブルからカートアイテムを取得して一覧表示
遷移元アクションと連携
PayOffAction,PayOffDAO,DTO
購入確定後、DB設計に基づいて購入情報をDBへ登録する
-----------------------------------------
□購入完了画面　担当：
ThankYou.jsp
購入完了画面
LogOutAction
ログイン情報を削除し商品一覧画面へ遷移させるアクション
ReturnTopAction
動的値を適切に処理し、商品一覧画面へ遷移させるアクション
-----------------------------------------
□購入確定画面→商品一覧画面
□新規登録画面→商品一覧画面
□ログイン画面→商品一覧画面
・各画面共通の状態
セッションに保存されたカートリストはcartテーブルにインサートされた段階で削除されている
cartテーブルにカートリストがMACアドレスで紐付けされてインサートされている

・問題点と解決方法
上述の通り、セッションにカートリストが保存されていない状態なのに、cartテーブルにはカートリストが保存されている状態となっている。
商品一覧画面に遷移した時にcartテーブルからselect文を使いセッションにカートリストを再び復活させ、その後select文とdelete文を使って削除する。

Q.全部セッションでやれば良いのではないか
本来はセッションには最低限の情報のみしか保持しないようにして、セキュリティリスクを回避する設計であった。←これ！来月はこれ絶対やります！
そのため動的値の受け渡しを適切に行い、セッションを介さずにデータベースにテンポラリーテーブルを作成し、抽出→その後の流れを予定していた。
実際にはセッションを使わないと値の受け渡しが少しハードルが上がるため、今回はそれを見送りセッションを用いることにした。
あくまでセッションは最低限という目標をクリアするため、今回はこのような処理を提案しました。

よくよく考えてみると上記３画面から商品一覧画面への処理は共通なのでAction,dao,dto１セットで良いと思います。

□カート画面→商品一覧画面
・カートリストはセッションに保存されているので特段の処理は必要無い。
→普通に遷移させる処理を作って下さい。

□購入確認画面→購入確定画面
確認画面から確定画面へ遷移する段階でcartテーブルを削除する処理を行わないとcartテーブルにゴミが残ったままになってしまいます。
そのための処理を新たにdelete用daoを作成して行うようにしたいとおもいます。

この他にもいくつか懸念点があるのですが、それは口頭で説明します。

タスク状況からみて佐藤、半田、松本、それぞれでタスク分けを提案します。
林、岩井　両名については引き続き現在のタスクを進行する形で。

15〜16時までには各々作業を完了し、内部で動作確認と細かい修正をするのが良いと思います。

それから連絡として、参考サイトというメモをこのフォルダに作成しておきました。
皆さんからも何かあったら勝手に追加してってください。
-----------------------------------------
■更新履歴
2015/03/03 22:50
本日の画面設計及びDB設計踏まえた最新の内容に更新
不要な文章を削り必要部分に絞り簡易化
各タスクの割合に影響が出たためタスク分けを一旦保留

2015/03/04 13:20
タスク分け完了

2015/03/11
末尾に12日分担するタスクを追加
